name: lab4
prefix: ""

mgmt:
  network: custom_mgmt
  ipv4-subnet: 10.0.0.0/24


topology:
  kinds:
    ceos:
      image: ceosimage:latest
    linux:
      image: ghcr.io/srl-labs/network-multitool:latest
  nodes:
    spine1:
      kind: ceos
      mgmt-ipv4: 10.0.0.2
    
    spine2:
      kind: ceos
      mgmt-ipv4: 10.0.0.3
    
    leaf1a:
      kind: ceos
      mgmt-ipv4: 10.0.0.4
    
    leaf1b:
      kind: ceos
      mgmt-ipv4: 10.0.0.5
    
    leaf2:
      kind: ceos
      mgmt-ipv4: 10.0.0.6

    h1:
      kind: linux
      mgmt-ipv4: 10.0.0.10
      exec:
        - ip addr add 10.0.20.10/24 dev eth1
        - ip route add 0.0.0.0/0 via 10.0.20.1
        - ip link set eth1 up
    h2:
      kind: linux
      mgmt-ipv4: 10.0.0.11
      exec:
        - ip addr add 10.0.20.11/24 dev eth1
        - ip route add 0.0.0.0/0 via 10.0.20.1
        - ip link set eth1 up
    h3:
      kind: linux
      mgmt-ipv4: 10.0.0.12
      exec:
        - ip addr add 10.0.20.12/24 dev eth1
        - ip route add 0.0.0.0/0 via 10.0.20.1
        - ip link set eth1 up


  links:
    - endpoints: ["leaf1a:eth47", "leaf1b:eth47"]
    - endpoints: ["leaf1a:eth48", "leaf1b:eth48"]
    - endpoints: ["spine1:eth3", "leaf1a:eth49"]
    - endpoints: ["spine1:eth4", "leaf2:eth1"]
    - endpoints: ["spine2:eth3", "leaf1b:eth49"]
    - endpoints: ["spine2:eth4", "leaf2:eth2"]
    - endpoints: ["h1:eth1", "leaf1a:eth10"]
    - endpoints: ["h2:eth1", "leaf1b:eth10"]
    - endpoints: ["h3:eth1", "leaf2:eth10"]

